// ==UserScript==
// @name         群空调
// @author       JustAnotherID
// @version      1.0.1
// @description  使用 .空调 help 查看帮助，为群里安装空调吧（？
// @timestamp    2024-04-12 11:45:14
// @license      MIT
// @homepageURL  https://github.com/JustAnotherID/just-another-seal-mod-repo/tree/master/js/air-conditioner
// @updateUrl    https://mirror.ghproxy.com/https://raw.githubusercontent.com/JustAnotherID/just-another-seal-mod-repo/master/js/air-conditioner/dist/%E7%BE%A4%E7%A9%BA%E8%B0%83.js
// @updateUrl    https://raw.githubusercontent.com/JustAnotherID/just-another-seal-mod-repo/master/js/air-conditioner/dist/%E7%BE%A4%E7%A9%BA%E8%B0%83.js
// ==/UserScript==

(()=>{var C=typeof global=="object"&&global&&global.Object===Object&&global,h=C;var b=typeof self=="object"&&self&&self.Object===Object&&self,v=h||b||Function("return this")(),g=v;var S=g.isFinite;function E(r){return typeof r=="number"&&S(r)}var i=E;var m=(r,o)=>{let t=r.storageGet("air-conditioner_"+o);return t?JSON.parse(t):{open:!1,mode:"\u5236\u51B7",temperature:26}},x=(r,o,t)=>{r.storageSet("air-conditioner_"+o,JSON.stringify(t))};var y=(r,o)=>{let t=m(r,o),e=`\u5F53\u524D\u7A7A\u8C03${t.open?"\u5DF2\u5F00\u542F":"\u5DF2\u5173\u95ED"}`;return t.open&&(e+=`
\u6A21\u5F0F\uFF1A${t.mode}`,["\u5236\u51B7","\u5236\u70ED","\u9664\u6E7F"].includes(t.mode)&&(e+=`
\u6E29\u5EA6\uFF1A${t.temperature}\xB0C`)),e},c=(r,o,t)=>{let e=m(r,o);if(e.open=t,e.open&&!e.mode&&(e.mode="\u5236\u51B7",e.temperature=26),x(r,o,e),e.open){let s=`\u7A7A\u8C03\u5DF2\u7ECF\u5F00\u542F\uFF0C\u5F53\u524D\u4E3A${e.mode}\u6A21\u5F0F`;return["\u5236\u51B7","\u5236\u70ED","\u9664\u6E7F"].includes(e.mode)&&(s+=`\uFF0C\u6E29\u5EA6 ${e.temperature}\xB0C`),s}else return"\u7A7A\u8C03\u5DF2\u7ECF\u5173\u95ED"},w=(r,o,t)=>{let e=m(r,o);if(!e.open)return"\u7A7A\u8C03\u672A\u5F00\u542F";t||(e.mode==="\u5236\u51B7"?t="\u5236\u70ED":e.mode==="\u5236\u70ED"?t="\u9664\u6E7F":e.mode==="\u9664\u6E7F"?t="\u9001\u98CE":e.mode==="\u9001\u98CE"&&(t="\u5236\u51B7")),e.mode=t;let s=`\u7A7A\u8C03\u5207\u6362\u4E3A${t}\u6A21\u5F0F`;return["\u5236\u51B7","\u5236\u70ED","\u9664\u6E7F"].includes(t)&&((!e.temperature||e.temperature===0)&&(e.temperature=26),s+=`\uFF0C\u5F53\u524D\u6E29\u5EA6 ${e.temperature}\xB0C`),x(r,o,e),s},I=(r,o,t)=>{let e=m(r,o);if(e.open){if(!["\u5236\u51B7","\u5236\u70ED","\u9664\u6E7F"].includes(e.mode))return`\u5F53\u524D\u7A7A\u8C03\u4E3A${e.mode}\u6A21\u5F0F`}else return"\u7A7A\u8C03\u672A\u5F00\u542F";if(t)if(t.startsWith("+")||t.startsWith("-")){let s=t.startsWith("+")?1:-1;t=t.slice(1);let d=Number(t);if(i(d)){let f=e.temperature+d*s;return f%.5!==0?"\u6E29\u5EA6\u8C03\u6574\u683C\u5F0F\u9519\u8BEF\uFF0C\u6E29\u5EA6\u53EA\u80FD\u4EE5 0.5 \u4E3A\u95F4\u9694":f<16||f>32?"\u6E29\u5EA6\u8C03\u6574\u683C\u5F0F\u9519\u8BEF\uFF0C\u6E29\u5EA6\u53EA\u80FD\u5728 16\xB0C \u5230 32\xB0C \u4E4B\u95F4":(e.temperature=f,x(r,o,e),`\u6E29\u5EA6\u5DF2\u8C03\u6574\u4E3A ${e.temperature}\xB0C`)}else return"\u6E29\u5EA6\u8C03\u6574\u683C\u5F0F\u9519\u8BEF\uFF0C\u8BF7\u8F93\u5165\u300C.\u6E29\u5EA6 [+/-]<\u6E29\u5EA6>\u300D\u6765\u5347\u9AD8\u6216\u964D\u4F4E\u6E29\u5EA6"}else{let s=Number(t);return i(s)?s%.5!==0?"\u6E29\u5EA6\u8C03\u6574\u683C\u5F0F\u9519\u8BEF\uFF0C\u6E29\u5EA6\u53EA\u80FD\u4EE5 0.5 \u4E3A\u95F4\u9694":s<16||s>32?"\u6E29\u5EA6\u8C03\u6574\u683C\u5F0F\u9519\u8BEF\uFF0C\u6E29\u5EA6\u53EA\u80FD\u5728 16\xB0C \u5230 32\xB0C \u4E4B\u95F4":(e.temperature=s,x(r,o,e),`\u6E29\u5EA6\u5DF2\u8C03\u6574\u4E3A ${e.temperature}\xB0C`):"\u6E29\u5EA6\u8C03\u6574\u683C\u5F0F\u9519\u8BEF\uFF0C\u8BF7\u8F93\u5165\u300C.\u6E29\u5EA6 <\u6E29\u5EA6>\u300D\u6765\u76F4\u63A5\u6307\u5B9A\u6E29\u5EA6"}else return"\u6E29\u5EA6\u8C03\u6574\u683C\u5F0F\u9519\u8BEF\uFF0C\u672A\u6307\u5B9A\u503C"};var n=`\u7FA4\u7A7A\u8C03
.\u5F00\u7A7A\u8C03 // \u6253\u5F00\u7FA4\u5185\u7A7A\u8C03
.\u5173\u7A7A\u8C03 // \u5173\u95ED\u7FA4\u5185\u7A7A\u8C03
.\u6A21\u5F0F (\u5236\u51B7|\u5236\u70ED|\u9664\u6E7F|\u9001\u98CE) // \u8BBE\u7F6E\u6A21\u5F0F\uFF0C\u5982\u300C.\u6A21\u5F0F \u5236\u51B7\u300D\u8BBE\u7F6E\u4E3A\u5236\u51B7\u6A21\u5F0F\uFF0C\u4E0D\u5E26\u53C2\u6570\u65F6\u5207\u6362\u4E3A\u4E0B\u4E2A\u6A21\u5F0F
.\u6E29\u5EA6 (+|-)<\u503C> // \u8C03\u6574\u7A7A\u8C03\u6E29\u5EA6\uFF08\xB0C\uFF09\uFF0C\u5982\u300C.\u6E29\u5EA6 +2\u300D\u63D0\u5347 2\xB0C\uFF0C\u300C.\u6E29\u5EA6 -1\u300D\u964D\u4F4E 1\xB0C
.\u6E29\u5EA6 <\u503C> // \u76F4\u63A5\u8BBE\u7F6E\u7A7A\u8C03\u6E29\u5EA6\uFF08\xB0C\uFF09\uFF0C\u5982\u300C.\u6E29\u5EA6 26\u300D\u8BBE\u7F6E\u6E29\u5EA6\u4E3A 26\xB0C
.\u7A7A\u8C03 // \u67E5\u770B\u5F53\u524D\u72B6\u6001
.\u7A7A\u8C03 help|\u5E2E\u52A9 // \u67E5\u770B\u83DC\u5355`;function R(){let r=seal.ext.find("air-conditioner");r||(r=seal.ext.new("air-conditioner","JustAnotherID","1.0.0"),seal.ext.register(r));let o=seal.ext.newCmdItemInfo();o.name="\u7A7A\u8C03",o.help=n,o.solve=(f,a,u)=>{switch(u.getArgN(1)){case"help":case"\u5E2E\u52A9":let l=seal.ext.newCmdExecuteResult(!0);return l.showHelp=!0,l;default:return a.messageType!=="group"?(seal.replyToSender(f,a,"\u7A7A\u8C03\u53EA\u80FD\u5728\u7FA4\u5185\u4F7F\u7528"),seal.ext.newCmdExecuteResult(!0)):(seal.replyToSender(f,a,y(r,a.groupId)),seal.ext.newCmdExecuteResult(!0))}};let t=seal.ext.newCmdItemInfo();t.name="\u5F00\u7A7A\u8C03",t.help=n,t.solve=(f,a,u)=>{switch(u.getArgN(1)){case"help":case"\u5E2E\u52A9":let l=seal.ext.newCmdExecuteResult(!0);return l.showHelp=!0,l;default:return a.messageType!=="group"?(seal.replyToSender(f,a,"\u7A7A\u8C03\u53EA\u80FD\u5728\u7FA4\u5185\u4F7F\u7528"),seal.ext.newCmdExecuteResult(!0)):(seal.replyToSender(f,a,c(r,a.groupId,!0)),seal.ext.newCmdExecuteResult(!0))}};let e=seal.ext.newCmdItemInfo();e.name="\u5173\u7A7A\u8C03",e.help=n,e.solve=(f,a,u)=>{switch(u.getArgN(1)){case"help":case"\u5E2E\u52A9":let l=seal.ext.newCmdExecuteResult(!0);return l.showHelp=!0,l;default:return a.messageType!=="group"?(seal.replyToSender(f,a,"\u7A7A\u8C03\u53EA\u80FD\u5728\u7FA4\u5185\u4F7F\u7528"),seal.ext.newCmdExecuteResult(!0)):(seal.replyToSender(f,a,c(r,a.groupId,!1)),seal.ext.newCmdExecuteResult(!0))}};let s=seal.ext.newCmdItemInfo();s.name="\u6A21\u5F0F",s.help=n,s.solve=(f,a,u)=>{let p=u.getArgN(1);switch(p){case"help":case"\u5E2E\u52A9":let l=seal.ext.newCmdExecuteResult(!0);return l.showHelp=!0,l;default:return a.messageType!=="group"?(seal.replyToSender(f,a,"\u7A7A\u8C03\u53EA\u80FD\u5728\u7FA4\u5185\u4F7F\u7528"),seal.ext.newCmdExecuteResult(!0)):(seal.replyToSender(f,a,w(r,a.groupId,p)),seal.ext.newCmdExecuteResult(!0))}};let d=seal.ext.newCmdItemInfo();d.name="\u6E29\u5EA6",d.help=n,d.solve=(f,a,u)=>{let p=u.getArgN(1);switch(p){case"":case"help":case"\u5E2E\u52A9":let l=seal.ext.newCmdExecuteResult(!0);return l.showHelp=!0,l;default:return a.messageType!=="group"?(seal.replyToSender(f,a,"\u7A7A\u8C03\u53EA\u80FD\u5728\u7FA4\u5185\u4F7F\u7528"),seal.ext.newCmdExecuteResult(!0)):(seal.replyToSender(f,a,I(r,a.groupId,p)),seal.ext.newCmdExecuteResult(!0))}},r.cmdMap.\u7A7A\u8C03=o,r.cmdMap.\u5F00\u7A7A\u8C03=t,r.cmdMap.\u5173\u7A7A\u8C03=e,r.cmdMap.\u6A21\u5F0F=s,r.cmdMap.\u6E29\u5EA6=d}R();})();
/*! Bundled license information:

lodash-es/lodash.js:
  (**
   * @license
   * Lodash (Custom Build) <https://lodash.com/>
   * Build: `lodash modularize exports="es" -o ./`
   * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
   * Released under MIT license <https://lodash.com/license>
   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
   *)
*/
