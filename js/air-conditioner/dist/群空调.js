// ==UserScript==
// @name         群空调
// @author       JustAnotherID
// @version      1.1.1
// @description  使用 .空调 help 查看帮助，为群里安装空调吧（？
// @timestamp    2024-04-12 11:45:14
// @license      MIT
// @homepageURL  https://github.com/JustAnotherID/just-another-seal-mod-repo/tree/master/js/air-conditioner
// @updateUrl    https://mirror.ghproxy.com/https://raw.githubusercontent.com/JustAnotherID/just-another-seal-mod-repo/master/js/air-conditioner/dist/%E7%BE%A4%E7%A9%BA%E8%B0%83.js
// @updateUrl    https://raw.githubusercontent.com/JustAnotherID/just-another-seal-mod-repo/master/js/air-conditioner/dist/%E7%BE%A4%E7%A9%BA%E8%B0%83.js
// ==/UserScript==

(()=>{var W=typeof global=="object"&&global&&global.Object===Object&&global,w=W;var M=typeof self=="object"&&self&&self.Object===Object&&self,T=w||M||Function("return this")(),b=T;var O=b.isFinite;function A(t){return typeof t=="number"&&O(t)}var x=A;var n=(t,s)=>{let r=t.storageGet("air-conditioner_"+s);return r?JSON.parse(r):{open:!1,mode:"\u5236\u51B7",temperature:26,ocMode:!1}},c=(t,s,r)=>{t.storageSet("air-conditioner_"+s,JSON.stringify(r))};var h=t=>x(t)?t<16||t>32?[!1,"\u53EA\u80FD\u5728 16\xB0C \u5230 32\xB0C \u4E4B\u95F4"]:t%.5!==0?[!1,"\u53EA\u80FD\u4EE5 0.5 \u4E3A\u95F4\u9694"]:[!0,""]:[!1,"\u683C\u5F0F\u9519\u8BEF"],C=t=>x(t)?t<=-273.15?[!1,"\u8D85\u51FA\u7269\u7406\u6781\u9650"]:t%.5!==0?[!1,"\u53EA\u80FD\u4EE5 0.5 \u4E3A\u95F4\u9694"]:[!0,""]:[!1,"\u683C\u5F0F\u9519\u8BEF"];var I=(t,s)=>{let r=n(t,s),e=`\u5F53\u524D\u7A7A\u8C03${r.open?"\u5DF2\u5F00\u542F":"\u5DF2\u5173\u95ED"}`;return r.open&&(r.ocMode&&(e+="[\u5DF2\u8D85\u9891]"),e+=`
\u6A21\u5F0F\uFF1A${r.mode}`,["\u5236\u51B7","\u5236\u70ED","\u9664\u6E7F"].includes(r.mode)&&(e+=`
\u6E29\u5EA6\uFF1A${r.temperature}\xB0C`)),e},g=(t,s,r)=>{let e=n(t,s);if(e.open=r,e.open&&!e.mode&&(e.mode="\u5236\u51B7",e.temperature=26,e.ocMode=!1),c(t,s,e),e.open){let a=`\u7A7A\u8C03\u5DF2\u7ECF\u5F00\u542F\uFF0C\u5F53\u524D\u4E3A${e.mode}\u6A21\u5F0F`;return e.ocMode&&(a+="[\u5DF2\u8D85\u9891]"),["\u5236\u51B7","\u5236\u70ED","\u9664\u6E7F"].includes(e.mode)&&(a+=`\uFF0C\u6E29\u5EA6 ${e.temperature}\xB0C`),a}else return"\u7A7A\u8C03\u5DF2\u7ECF\u5173\u95ED"},E=(t,s,r)=>{let e=n(t,s);if(!e.open)return"\u7A7A\u8C03\u672A\u5F00\u542F";r||(e.mode==="\u5236\u51B7"?r="\u5236\u70ED":e.mode==="\u5236\u70ED"?r="\u9664\u6E7F":e.mode==="\u9664\u6E7F"?r="\u9001\u98CE":e.mode==="\u9001\u98CE"&&(r="\u5236\u51B7")),e.mode=r;let a=`\u7A7A\u8C03\u5207\u6362\u4E3A${r}\u6A21\u5F0F`;return["\u5236\u51B7","\u5236\u70ED","\u9664\u6E7F"].includes(r)&&((!e.temperature||e.temperature===0)&&(e.temperature=26),a+=`\uFF0C\u5F53\u524D\u6E29\u5EA6 ${e.temperature}\xB0C`),c(t,s,e),a},S=(t,s,r,e)=>{let a=n(t,s);if(a.open){if(!["\u5236\u51B7","\u5236\u70ED","\u9664\u6E7F"].includes(a.mode))return`\u5F53\u524D\u7A7A\u8C03\u4E3A${a.mode}\u6A21\u5F0F`}else return"\u7A7A\u8C03\u672A\u5F00\u542F";if(r){let u;if(a.ocMode)if((r==="-"||r==="+")&&!(e!=null&&e.startsWith("-"))&&!(e!=null&&e.startsWith("+"))){let f=Number(e);x(f)&&(u=a.temperature+(r==="-"?-f:f))}else if(r.startsWith("+")){let f=Number(r);x(f)&&(u=a.temperature+f)}else u=Number(r);else if((r==="-"||r==="+")&&!(e!=null&&e.startsWith("-"))&&!(e!=null&&e.startsWith("+"))){let f=Number(e);x(f)&&(u=a.temperature+(r==="-"?-f:f))}else if(r.startsWith("+")||r.startsWith("-")){let f=Number(r);x(f)&&(u=a.temperature+f)}else u=Number(r);if(x(u)){let f,l;return a.ocMode?[f,l]=C(u):[f,l]=h(u),f?(a.temperature=u,c(t,s,a),`\u6E29\u5EA6\u5DF2\u8C03\u6574\u4E3A ${a.temperature}\xB0C`):"\u6E29\u5EA6\u8C03\u6574\u5931\u8D25\uFF0C"+l}else return"\u6E29\u5EA6\u8C03\u6574\u5931\u8D25\uFF0C\u8BF7\u8F93\u5165\u300C.\u6E29\u5EA6 <\u6E29\u5EA6>\u300D\u6765\u76F4\u63A5\u6307\u5B9A\u6E29\u5EA6\uFF0C\u6216\u8F93\u5165\u300C.\u6E29\u5EA6 [+/-] <\u6E29\u5EA6>\u300D\u6765\u5347\u9AD8\u6216\u964D\u4F4E\u6E29\u5EA6"}else return"\u6E29\u5EA6\u8C03\u6574\u5931\u8D25\uFF0C\u672A\u6307\u5B9A\u503C"},R=(t,s,r)=>{let e=n(t,s);if(!e.open)return"\u7A7A\u8C03\u672A\u5F00\u542F";e.ocMode=r;let a;if(e.ocMode)a="\u8D85\u9891\u6A21\u5F0F\u5DF2\u5F00\u542F";else{a="\u8D85\u9891\u6A21\u5F0F\u5DF2\u5173\u95ED";let[u,f]=h(e.temperature);u||(e.temperature=26,a+="\uFF0C\u5F53\u524D\u6E29\u5EA6\u5DF2\u8C03\u6574\u4E3A 26\xB0C")}return c(t,s,e),a};var i=`\u7FA4\u7A7A\u8C03
.\u5F00\u7A7A\u8C03 // \u6253\u5F00\u7FA4\u5185\u7A7A\u8C03
.\u5173\u7A7A\u8C03 // \u5173\u95ED\u7FA4\u5185\u7A7A\u8C03
.\u6A21\u5F0F (\u5236\u51B7|\u5236\u70ED|\u9664\u6E7F|\u9001\u98CE) // \u8BBE\u7F6E\u6A21\u5F0F\uFF0C\u5982\u300C.\u6A21\u5F0F \u5236\u51B7\u300D\u8BBE\u7F6E\u4E3A\u5236\u51B7\u6A21\u5F0F\uFF0C\u4E0D\u5E26\u53C2\u6570\u65F6\u5207\u6362\u4E3A\u4E0B\u4E2A\u6A21\u5F0F
.\u6E29\u5EA6 (+|-) <\u503C> // \u8C03\u6574\u7A7A\u8C03\u6E29\u5EA6\uFF08\xB0C\uFF09\uFF0C\u5982\u300C.\u6E29\u5EA6 + 2\u300D\u63D0\u5347 2\xB0C\uFF0C\u300C.\u6E29\u5EA6 - 1\u300D\u964D\u4F4E 1\xB0C
.\u6E29\u5EA6 <\u503C> // \u76F4\u63A5\u8BBE\u7F6E\u7A7A\u8C03\u6E29\u5EA6\uFF08\xB0C\uFF09\uFF0C\u5982\u300C.\u6E29\u5EA6 26\u300D\u8BBE\u7F6E\u6E29\u5EA6\u4E3A 26\xB0C
.\u8D85\u9891 (\u5F00|\u5173) // \u542F\u7528/\u5173\u95ED\u8D85\u9891\u6A21\u5F0F\uFF0C\u89E3\u9664\u6E29\u5EA6\u63A7\u5236
.\u7A7A\u8C03 // \u67E5\u770B\u5F53\u524D\u72B6\u6001
.\u7A7A\u8C03 (help|\u5E2E\u52A9) // \u67E5\u770B\u83DC\u5355`;function B(){let t=seal.ext.find("air-conditioner");t||(t=seal.ext.new("air-conditioner","JustAnotherID","1.1.1"),seal.ext.register(t));let s=seal.ext.newCmdItemInfo();s.name="\u7A7A\u8C03",s.help=i,s.solve=(l,o,d)=>{switch(d.getArgN(1)){case"help":case"\u5E2E\u52A9":let p=seal.ext.newCmdExecuteResult(!0);return p.showHelp=!0,p;default:return o.messageType!=="group"?(seal.replyToSender(l,o,"\u7A7A\u8C03\u53EA\u80FD\u5728\u7FA4\u5185\u4F7F\u7528"),seal.ext.newCmdExecuteResult(!0)):(seal.replyToSender(l,o,I(t,o.groupId)),seal.ext.newCmdExecuteResult(!0))}};let r=seal.ext.newCmdItemInfo();r.name="\u5F00\u7A7A\u8C03",r.help=i,r.solve=(l,o,d)=>{switch(d.getArgN(1)){case"help":case"\u5E2E\u52A9":let p=seal.ext.newCmdExecuteResult(!0);return p.showHelp=!0,p;default:return o.messageType!=="group"?(seal.replyToSender(l,o,"\u7A7A\u8C03\u53EA\u80FD\u5728\u7FA4\u5185\u4F7F\u7528"),seal.ext.newCmdExecuteResult(!0)):(seal.replyToSender(l,o,g(t,o.groupId,!0)),seal.ext.newCmdExecuteResult(!0))}};let e=seal.ext.newCmdItemInfo();e.name="\u5173\u7A7A\u8C03",e.help=i,e.solve=(l,o,d)=>{switch(d.getArgN(1)){case"help":case"\u5E2E\u52A9":let p=seal.ext.newCmdExecuteResult(!0);return p.showHelp=!0,p;default:return o.messageType!=="group"?(seal.replyToSender(l,o,"\u7A7A\u8C03\u53EA\u80FD\u5728\u7FA4\u5185\u4F7F\u7528"),seal.ext.newCmdExecuteResult(!0)):(seal.replyToSender(l,o,g(t,o.groupId,!1)),seal.ext.newCmdExecuteResult(!0))}};let a=seal.ext.newCmdItemInfo();a.name="\u6A21\u5F0F",a.help=i,a.solve=(l,o,d)=>{let m=d.getArgN(1);switch(m){case"help":case"\u5E2E\u52A9":let p=seal.ext.newCmdExecuteResult(!0);return p.showHelp=!0,p;default:return o.messageType!=="group"?(seal.replyToSender(l,o,"\u7A7A\u8C03\u53EA\u80FD\u5728\u7FA4\u5185\u4F7F\u7528"),seal.ext.newCmdExecuteResult(!0)):(seal.replyToSender(l,o,E(t,o.groupId,m)),seal.ext.newCmdExecuteResult(!0))}};let u=seal.ext.newCmdItemInfo();u.name="\u6E29\u5EA6",u.help=i,u.solve=(l,o,d)=>{let m=d.getArgN(1),p=d.getArgN(2);switch(m){case"":case"help":case"\u5E2E\u52A9":let y=seal.ext.newCmdExecuteResult(!0);return y.showHelp=!0,y;default:return o.messageType!=="group"?(seal.replyToSender(l,o,"\u7A7A\u8C03\u53EA\u80FD\u5728\u7FA4\u5185\u4F7F\u7528"),seal.ext.newCmdExecuteResult(!0)):(seal.replyToSender(l,o,S(t,o.groupId,m,p)),seal.ext.newCmdExecuteResult(!0))}};let f=seal.ext.newCmdItemInfo();f.name="\u8D85\u9891",f.help=i,f.solve=(l,o,d)=>{let m=d.getArgN(1);switch(m){case"\u5F00":case"\u5173":return o.messageType!=="group"?(seal.replyToSender(l,o,"\u7A7A\u8C03\u53EA\u80FD\u5728\u7FA4\u5185\u4F7F\u7528"),seal.ext.newCmdExecuteResult(!0)):(seal.replyToSender(l,o,R(t,o.groupId,m==="\u5F00")),seal.ext.newCmdExecuteResult(!0));case"help":case"\u5E2E\u52A9":default:let p=seal.ext.newCmdExecuteResult(!0);return p.showHelp=!0,p}},t.cmdMap.\u7A7A\u8C03=s,t.cmdMap.\u5F00\u7A7A\u8C03=r,t.cmdMap.\u5173\u7A7A\u8C03=e,t.cmdMap.\u6A21\u5F0F=a,t.cmdMap.\u6E29\u5EA6=u,t.cmdMap.\u8D85\u9891=f}B();})();
/*! Bundled license information:

lodash-es/lodash.js:
  (**
   * @license
   * Lodash (Custom Build) <https://lodash.com/>
   * Build: `lodash modularize exports="es" -o ./`
   * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
   * Released under MIT license <https://lodash.com/license>
   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
   *)
*/
